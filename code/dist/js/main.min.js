"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var addClassLazyload=function(){var imgList=document.querySelectorAll("img[data-src]");Array.prototype.forEach.call(imgList,function(el,i){el.className.length>0?el.className=el.className+" lazyload":el.className="lazyload"})},videoGallery=function(){var _ref;return new Swiper(".home-video-gallery .swiper-container",(_defineProperty(_ref={slidesPerView:3,centeredSlides:!0,loopedSlides:5,loop:!0,spaceBetween:0,observer:!0,observeParents:!0,speed:1200},"loop",!0),_defineProperty(_ref,"navigation",{prevEl:".home-video-gallery .swiper-container .prev",nextEl:".home-video-gallery .swiper-container .next"}),_defineProperty(_ref,"breakpoints",{1025:{slidesPerView:1}}),_ref))},headerClickToScroll=function(){$(".header-wrapper ul a").each(function(){$(this).on("click",function(e){activeWhenScrollTo();var target=$(this).attr("data-href"),pos=$(target).offset().top;$("html,body").animate({scrollTop:pos},1200),$("#header-menu").toggleClass("show"),$("#header-menu").hasClass("show")?$("#mobile-toggle").addClass("close"):$("#mobile-toggle").removeClass("close")})})},activeWhenScrollTo=function(){$(".home").each(function(){var target=$(this).attr("id");target="#"+target;var pos=$(this).offset().top-200;$(window).scrollTop()>pos&&($(".header-wrapper ul a[href='"+target+"']").parent().addClass("active"),$(".header-wrapper ul a[href='"+target+"']").parent().siblings("li").removeClass("active"))})},changeClassToSlider=function(bp){var classContainer=document.querySelectorAll("#home-2 .home-2-container"),classWrapper=document.querySelectorAll("#home-2 .home-2-wrapper"),classSlide=document.querySelectorAll("#home-2 .home-2-container .home-2-slide");if(bp.matches){Array.prototype.forEach.call(classContainer,function(el){el.classList.remove("mobile-content"),el.classList.add("swiper-container")}),Array.prototype.forEach.call(classWrapper,function(el){el.classList.remove("row"),el.classList.remove("no-gutters"),el.classList.add("swiper-wrapper")}),Array.prototype.forEach.call(classSlide,function(el){el.classList.remove("col-lg-4"),el.classList.add("swiper-slide")});new Swiper("#home-2 .home-2-container",{slidesPerView:1,on:{init:function(){Array.prototype.forEach.call(classSlide,function(el){el.style.height=document.querySelector("#home-2 .home-2-container").offsetHeight+"px"})}},pagination:{el:"#home-2 .home-2-container .home-2-dots",clickable:!0,speed:1200}})}else Array.prototype.forEach.call(classContainer,function(el){el.classList.add("mobile-content"),el.classList.remove("swiper-container"),el.removeAttribute("style")}),Array.prototype.forEach.call(classWrapper,function(el){el.classList.add("row"),el.classList.add("no-gutters"),el.classList.remove("swiper-wrapper"),el.removeAttribute("style")}),Array.prototype.forEach.call(classSlide,function(el){el.classList.add("col-lg-4"),el.classList.remove("swiper-slide"),el.removeAttribute("style")})},mobileMenuToggle=function(){$("#mobile-toggle").on("click",function(){$("#header-menu").toggleClass("show"),$("#header-menu").hasClass("show")?$(this).addClass("close"):$(this).removeClass("close")})},checkBreakpoint=function(){var bp=window.matchMedia("(max-width: 1024px)");changeClassToSlider(bp),bp.addListener(changeClassToSlider)},setHeightMobile=function(){var ClassArray=document.querySelectorAll(".home");Array.prototype.forEach.call(ClassArray,function(el,i){i>>1&&(el.style.minHeight=window.innerHeight+"px")})},Design=function(){function Design(imageNavSelector,textSelector,resultSelector){_classCallCheck(this,Design),null!=imageNavSelector&&null!=textSelector&&null!=resultSelector&&(this.imageNavSelector=imageNavSelector,this.textSelector=textSelector,this.resultSelector=resultSelector,this.textSelector,this.setHeightImageItem(),this.changeImage(),this.changeText(),this.changeStyle(),this.nextBlock())}return _createClass(Design,[{key:"changeImage",value:function(){if(null!=document.querySelector(this.imageNavSelector)){var images=document.querySelector(this.imageNavSelector).querySelectorAll(".img-item");Array.prototype.forEach.call(images,function(el,index){var current=index;el.addEventListener("click",function(){el.classList.add("active");var imageUrl=el.querySelector("img").getAttribute("data-src");document.querySelector("#result-img img").setAttribute("src",imageUrl);var imagesNotClicked=Array.prototype.filter.call(images,function(value,index){return current!==index});Array.prototype.forEach.call(imagesNotClicked,function(el){el.classList.remove("active")})})})}}},{key:"setHeightImageItem",value:function(){if(null!=document.querySelector(this.imageNavSelector)){var images=document.querySelector(this.imageNavSelector).querySelectorAll(".img-item");Array.prototype.forEach.call(images,function(el){el.style.height=el.offsetWidth+"px"}),window.addEventListener("resize",function(){Array.prototype.forEach.call(images,function(el){el.style.height=el.offsetWidth+"px"})})}}},{key:"changeText",value:function(){if(null!=document.querySelector(this.textSelector)){var textInput=document.querySelector(this.textSelector),maxLength=textInput.getAttribute("maxlength");textInput.addEventListener("keyup",function(event){var text=textInput.value,currentLength=text.length;if(currentLength>255){var backText=document.querySelector("#result-text").innerHTML;textInput.innerHTML=backText}else{var stringLengthLeft=maxLength-currentLength;document.querySelector("#result-text").innerHTML=text,document.querySelector("#string-length-left").innerHTML=stringLengthLeft}}),textInput.addEventListener("paste",function(e){var text=textInput.value,currentLength=text.length;if(currentLength>255){var backText=document.querySelector("#result-text").innerHTML;textInput.innerHTML=backText}else{var stringLengthLeft=maxLength-currentLength;document.querySelector("#result-text").innerHTML=text,document.querySelector("#string-length-left").innerHTML=stringLengthLeft}})}}},{key:"changeStyle",value:function(){if(document.querySelectorAll("#style [data-style]").length>0){var styleItems=document.querySelectorAll("#style [data-style]");Array.prototype.forEach.call(styleItems,function(item,index){var current=index;item.addEventListener("click",function(e){var style=item.getAttribute("data-style");"Soft"==style?(document.querySelector("#result-text-title").classList.remove("Stylish"),document.querySelector("#result-text-title").classList.remove("Simple"),document.querySelector("#result-text").classList.remove("Stylish"),document.querySelector("#result-text").classList.remove("Simple"),document.querySelector(".text-input label").classList.remove("Stylish"),document.querySelector(".text-input label").classList.remove("Simple"),document.querySelector(".text-input textarea").classList.remove("Stylish"),document.querySelector(".text-input textarea").classList.remove("Simple")):"Stylish"==style?(document.querySelector("#result-text-title").classList.remove("Soft"),document.querySelector("#result-text-title").classList.remove("Simple"),document.querySelector("#result-text").classList.remove("Soft"),document.querySelector("#result-text").classList.remove("Simple"),document.querySelector(".text-input label").classList.remove("Soft"),document.querySelector(".text-input label").classList.remove("Simple"),document.querySelector(".text-input textarea").classList.remove("Soft"),document.querySelector(".text-input textarea").classList.remove("Simple")):(document.querySelector("#result-text-title").classList.remove("Soft"),document.querySelector("#result-text-title").classList.remove("Stylish"),document.querySelector("#result-text").classList.remove("Soft"),document.querySelector("#result-text").classList.remove("Stylish"),document.querySelector(".text-input label").classList.remove("Soft"),document.querySelector(".text-input label").classList.remove("Stylish"),document.querySelector(".text-input textarea").classList.remove("Soft"),document.querySelector(".text-input textarea").classList.remove("Stylish")),document.querySelector("#result-text-title").classList.add(style),document.querySelector("#result-text").classList.add(style),document.querySelector(".text-input label").classList.add(style),document.querySelector(".text-input textarea").classList.add(style),item.classList.add("active");var styleItemsNotClicked=Array.prototype.filter.call(styleItems,function(value,index){return current!==index});Array.prototype.forEach.call(styleItemsNotClicked,function(el){el.classList.remove("active")})})});var styleCurrent=0,prev=document.querySelector("#style .prev"),next=document.querySelector("#style .next");styleItems[styleCurrent].click(),prev.addEventListener("click",function(){styleCurrent<=0?styleCurrent=styleItems.length-1:styleCurrent--,styleItems[styleCurrent].click()}),next.addEventListener("click",function(){styleCurrent>=styleItems.length-1?styleCurrent=0:styleCurrent++,styleItems[styleCurrent].click()})}if(document.querySelectorAll("#color [data-style]").length>0){var colorItems=document.querySelectorAll("#color [data-style]");Array.prototype.forEach.call(colorItems,function(item,index){var current=index;item.addEventListener("click",function(e){var style=item.getAttribute("data-style");"White"==style?(document.querySelector("#result-text-title").classList.remove("Black"),document.querySelector("#result-text").classList.remove("Black"),document.querySelector(".text-input label").classList.remove("Black"),document.querySelector(".text-input textarea").classList.remove("Black")):(document.querySelector("#result-text-title").classList.remove("White"),document.querySelector("#result-text").classList.remove("White"),document.querySelector(".text-input label").classList.remove("White"),document.querySelector(".text-input textarea").classList.remove("White")),document.querySelector(".text-input label").classList.add(style),document.querySelector(".text-input textarea").classList.add(style),document.querySelector("#result-text").classList.add(style),document.querySelector("#result-text-title").classList.add(style),item.classList.add("active");var colorItemsNotClicked=Array.prototype.filter.call(colorItems,function(value,index){return current!==index});Array.prototype.forEach.call(colorItemsNotClicked,function(el){el.classList.remove("active")})})}),colorItems[0].click()}}},{key:"nextBlock",value:function(){null!=document.querySelectorAll("[data-to]")&&Array.prototype.forEach.call(document.querySelectorAll("[data-to]"),function(ele){ele.addEventListener("click",function(e){e.preventDefault();var target=parseInt(ele.getAttribute("data-to")),stepList=document.querySelectorAll("[data-step]");Array.prototype.forEach.call(stepList,function(el){el.classList.remove("active")}),stepList[target].classList.add("active")})})}}]),Design}(),customFancybox=function(){$("[data-fancybox='best-friend']").fancybox({touch:!1,afterLoad:function(){var images=document.querySelector("#image-nav").querySelectorAll(".img-item");Array.prototype.forEach.call(images,function(el){el.style.height=el.offsetWidth+"px"})},afterClose:function(){$(".best-friend-wrapper [data-step]").removeClass("active"),$(".best-friend-wrapper [data-step]").eq(0).addClass("active")}})},changeTopicID=function(){$("body").on("click",".type-image-nav .type-image a",function(){$(this).addClass("active"),$(this).siblings().removeClass("active"),$("#loading-popup").addClass("show"),setTimeout(function(){$("#loading-popup").removeClass("show")},1e3)})},countDownDate=new Date("Aug 24, 2019 23:59:59").getTime(),x=setInterval(function(){var now=(new Date).getTime(),distance=countDownDate-now,days=Math.floor(distance/864e5),hours=Math.floor(distance%864e5/36e5),minutes=Math.floor(distance%36e5/6e4);try{document.getElementById("days").innerHTML=days,document.getElementById("hours").innerHTML=hours,document.getElementById("minutes").innerHTML=minutes,distance<0&&(clearInterval(x),document.getElementById("demo").innerHTML="EXPIRED")}catch(error){}},1e3);function b64toBlob(b64Data,contentType,sliceSize){contentType=contentType||"",sliceSize=sliceSize||512;for(var byteCharacters=atob(b64Data),byteArrays=[],offset=0;offset<byteCharacters.length;offset+=sliceSize){for(var slice=byteCharacters.slice(offset,offset+sliceSize),byteNumbers=new Array(slice.length),i=0;i<slice.length;i++)byteNumbers[i]=slice.charCodeAt(i);var byteArray=new Uint8Array(byteNumbers);byteArrays.push(byteArray)}return new Blob(byteArrays,{type:contentType})}function getInformation(params){new Promise(function(resolve,reject){html2canvas(document.getElementById("result")).then(function(canvas){document.querySelector("#download").scrollTo({behavior:"smooth",left:0,top:0});var imgBase64=canvas.toDataURL("image/png");resolve(imgBase64)})}).then(function(imageCanvas){if("download"!==params){var topicId,block=imageCanvas.split(";"),contentType=block[0].split(":")[1],blob=b64toBlob(block[1].split(",")[1],contentType);document.querySelector("[data-topic-id].active")&&(topicId=document.querySelector("[data-topic-id].active").getAttribute("data-topic-id"));var imageActiveFilename=document.querySelector("#image-nav .img-item.active img").getAttribute("data-src").split(/(\\|\/)/g).pop(),formData=new FormData;formData.append("authorName",document.querySelector("#author").value),formData.append("content",document.querySelector("#text-input").value),formData.append("image",blob,imageActiveFilename),formData.append("topicId",topicId),formData.append("method",params),formData.append("formTitle",document.querySelector("#title").value),formData.append("formSendTo",document.querySelector("#send-to").value),formData.append("formContent",document.querySelector("#content").value),document.querySelector("#download-hidden").setAttribute("href",imageCanvas),document.querySelector("#download-hidden").click(),$.ajax({url:"/chia-se",method:"POST",data:formData,processData:!1,contentType:!1,success:function(response){400==response.Code?alert(response.Message):window.location.assign(response.Result)},error:function(){alert("Có lỗi xảy ra!")}})}})}$(document).ready(function(){objectFitImages("img.ofc"),addClassLazyload(),headerClickToScroll(),activeWhenScrollTo(),videoGallery(),checkBreakpoint(),setHeightMobile(),mobileMenuToggle(),customFancybox(),changeTopicID();var des=new Design("#image-nav","#text-input","#result");$(".btn-sendinfo").on("click",function(){getInformation($(this).attr("data-method"))}),$(window).on("scroll",function(){activeWhenScrollTo()}),$(document).ajaxComplete(function(){objectFitImages("img.ofc"),addClassLazyload(),des.setHeightImageItem(),des.changeImage(),document.querySelector("#image-nav").querySelectorAll(".img-item")[0].click()})});
//# sourceMappingURL=main.min.js.map
